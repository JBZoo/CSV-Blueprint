#
# JBZoo Toolbox - Csv-Blueprint.
#
# This file is part of the JBZoo Toolbox project.
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.
#
# @license    MIT
# @copyright  Copyright (C) JBZoo.com, All rights reserved.
# @see        https://github.com/JBZoo/Csv-Blueprint
#

# File contains just ideas. It's invalid!

# Include another schemas
includes: # Alias is always required
  - /path/schema_1.yml   as alias_1   # Full path to another schema.
  - ./path/schema_2.yml  as alias_2   # Relative path based on the current schema path.
  - ../path/schema_3.yml as alias_3   # Relative path based on the current schema path. Go up one level.


csv: # How to parse file before validation
  inherit: alias_1                    # Inherited from another schema. Options above will overwrite inherited options.
  strict_column_order: true           # true - columns must be in the same order as in the schema, false - no strict
  other_columns_possible: true        # true - other columns are allowed, false - no other columns
  null_values: [ "none", "nil" ]      # List of values that will be treated as empty

columns:
  - required: true                    # If true, then column must be present in the file
    null_values: # (Override csv\empty_values) List of values that will be treated as empty
      - ""
      - null
      - none
      - empty
      - nil
    # Multi prop
    multiple: true
    multiple_separator: "|"           # Separator for multiple values
    faker: [faker_method arg1 arg2]   # Faker method with arguments

    rules:
      # https://github.com/Respect/Validation/blob/main/docs/08-list-of-rules-by-category.md
      is_credit_card: brands[]        # https://github.com/Respect/Validation/blob/main/docs/rules/CreditCard.md
      is_iban: true
      is_bool_value: true             # https://github.com/Respect/Validation/blob/main/docs/rules/BoolVal.md

      # Dates
      leap_year: true                # Check if the date is a valid leap year
      age: 35
      dateperiod: 1
      dateinterval: 1
      is_time: true
      is_timezone: true
      is_timezone_offset: true

      # FS
      is_dir_name: true
      is_dir_name_full: true
      is_file_name: true
      is_file_name_full: true
      is_file_size: true
      is_file_extension: true
      is_mimetype: true

      # Codes
      subdivision_code: [ ]           # https://github.com/Respect/Validation/blob/main/docs/rules/SubdivisionCode.md

      # ids
      postal_code: country code       # https://github.com/Respect/Validation/blob/main/docs/rules/PostalCode.md
      is_bsn: true
      is_cnh: true
      is_cnpj: true
      is_cpf: true
      is_hetu: true
      is_imei: true
      is_isbn: true
      is_luhn: true
      is_nfe_access_key: true
      is_nif: true
      is_nip: true
      is_pesel: true
      is_pis: true
      is_polish_id_card: true
      is_portuguese_nif: true
      is_bic: true
      is_card_number: true

      # Hashes
      is_md2: true                    # Example: "c2cb085c24f850986e55f1c44abe6876"
      is_md4: true                    # Example: "2a4bbeffd06c016ab4134cc7963496d2"
      is_md5: true                    # Example: "d8578edf8458ce06fbc5bb76a58c5ca4"
      is_sha1: true                   # Example: "b1b3773a05c0ed0176787a4f1574ff0075f7521e"
      is_sha224: true                 # Example: "5154aaa49392fb275ce7e12a7d3e00901cf9cf3ab10491673f97322f"
      is_sha256: true                 # Example: "65e84be33532fb784c48129675f9eff3a682b27168c0ea744b2cf58ee02337c5"
      is_sha384: true                 # Example: "1ab60e110d41a9aac5e30d086c490819bfe3461b38c76b9602fe9686aa0aa3d28c63c96a1019e3788c40a14f4292e50f"
      is_sha512_224: true             # Example: "55c4880932da9f6d518ab3d07bc2526c3a358ddbdd4b792c440d2af8"
      is_sha512_256: true             # Example: "e8b1e383dd63a3fb50ec8e4e582b8a6e5412269eff82ffb892dd00b3cb157daf"
      is_sha512: true                 # Example: "0dd3e512642c97ca3f747f9a76e374fbda73f9292823c0313be9d78add7cdd8f72235af0c553dd26797e78e1854edee0ae002f8aba074b066dfce1af114e32f8"
      is_sha3_224: true               # Example: "13783bdfa4a63b202d9aa1992eccdd68a9fa5e44539273d8c2b797cd"
      is_sha3_256: true               # Example: "f171cbb35dd1166a20f99b5ad226553e122f3c0f2fe981915fb9e4517aac9038"
      is_sha3_384: true               # Example: "6729a614db5c5c97920e15501d361ba2f445758012e181af1c6300a99d9a951553fcc4e14aa614db164f61a758c6d6c9"
      is_sha3_512: true               # Example: "f6d1015e17df348f2d84b3b603648ae4bd14011f4e5b82f885e45587bcad48947d37d64501dc965c0f201171c44b656ee28ed9a5060aea1f2a336025320683d6"
      is_ripemd128: true              # Example: "aa0a5264bd784fcec22026886608ff37"
      is_ripemd160: true              # Example: "3a0ede1791358f307ae1f211d3fc4acf677644d8"
      is_ripemd256: true              # Example: "2e90f47814527f95933dffc1da9eebc1eba2bbca75095b6a4718d4cf6b2a5b89"
      is_ripemd320: true              # Example: "bdcd4765bd5050f8bd0fe1c1b9728c5ad14c2121d9d9069ce446e1d3e7e3f4e60e65c62e64d8d643"
      is_whirlpool: true              # Example: "4925da7da7a56260baf1c37925a8fa24e46ad8b107dcd21f44e39e4751bae1304fc70de7acb847ffa96126bb372de005f5320f1ede6f9df07c7d53f9c160f022"
      is_tiger128_3: true             # Example: "00722492524aaac42f4119227927f12f"
      is_tiger160_3: true             # Example: "00722492524aaac42f4119227927f12f51847b37"
      is_tiger192_3: true             # Example: "00722492524aaac42f4119227927f12f51847b37d400e819"
      is_tiger128_4: true             # Example: "2a581c1ffc93dba6065d1a037f3acc50"
      is_tiger160_4: true             # Example: "2a581c1ffc93dba6065d1a037f3acc50915d3621"
      is_tiger192_4: true             # Example: "2a581c1ffc93dba6065d1a037f3acc50915d3621dbe3d5c6"
      is_snefru: true                 # Example: "68880d55903beb3001eea8222aaedece6d1fa57cd142b1c217eafa817d5dc6a6"
      is_snefru256: true              # Example: "68880d55903beb3001eea8222aaedece6d1fa57cd142b1c217eafa817d5dc6a6"
      is_gost: true                   # Example: "20930ee319a54c7c97d29f373208134087998e29dff356f9dd3caafcc16a76eb"
      is_gost_crypto: true            # Example: "649f84af9970f16ba391dc1b3c4d959e44bb5f908fce01a1028a51593f2bd8d9"
      is_adler32: true                # Example: "094a02ad"
      is_crc32: true                  # Example: "30143f93"
      is_crc32b: true                 # Example: "03498d7d"
      is_crc32c: true                 # Example: "c3ba6452"
      is_fnv132: true                 # Example: "55549221"
      is_fnv1a32: true                # Example: "1ae54459"
      is_fnv164: true                 # Example: "5f10a08319d448c1"
      is_fnv1a64: true                # Example: "3eb459c7c3501ff9"
      is_joaat: true                  # Example: "956cea9b"
      is_murmur3a: true               # Example: "63a94b17"
      is_murmur3c: true               # Example: "65aeaed61ddeddd529b0f29229b0f292"
      is_murmur3f: true               # Example: "1ac8c76fab899b563590e4cdc1dffc37"
      is_xxh32: true                  # Example: "a7d1a491"
      is_xxh64: true                  # Example: "8afe1e67d48f917e"
      is_xxh3: true                   # Example: "e26e47d406128241"
      is_xxh128: true                 # Example: "7526ee965137b2687ad5cd960682dc28"
      is_haval128_3: true             # Example: "a63fc1b65651aad6ccc86880b0e4361b"
      is_haval160_3: true             # Example: "216bbac7189ccbf07e66367bc881f5e575629794"
      is_haval192_3: true             # Example: "af8f66b04be701f16febaa06882afe02ad51d4e1ec89d3f5"
      is_haval224_3: true             # Example: "1443a48e5f5c0f6481fdf3cb46eaf9fbcf8d838438917ca1daae78a4"
      is_haval256_3: true             # Example: "1fd87cdf95e66a64276f6445f5685dfc460c91e331bf104b6b2bb6bcbb7900f5"
      is_haval128_4: true             # Example: "2c0eb363ea8e206ccc38672a65ae94b6"
      is_haval160_4: true             # Example: "23806f6579d791f93ec31fffbf948cefa8ff6591"
      is_haval192_4: true             # Example: "91df271ea9f0027cfc3c751d00877b341d04606d4bd0f5ea"
      is_haval224_4: true             # Example: "42e45f9c516cb5e6fbff0b39c42a93d839019a690b8c867e25d380f4"
      is_haval256_4: true             # Example: "4672dd42d83c762bd7d0b6e3a6d220617d2e0678b8d616c4cfdeded0401a2bc5"
      is_haval128_5: true             # Example: "a85ba773f7a94bee515b8e8ff05b5985"
      is_haval160_5: true             # Example: "1becea7d3da8214210931b862535d5d4c32370cc"
      is_haval192_5: true             # Example: "08a07c4cdf3fb10da40b9cf3a43aa4c1f38f8e00bec3056a"
      is_haval224_5: true             # Example: "29f42b4f63899fd1b623437db7f5f30e3493190fad2e32fc795f01e5"

      is_ntlm: true                   # example: "3dbde697d71690a769204beb12283678"
      is_md6_128: true                # example: "650cdaa202ca22b1d8d7697f98267ae5"
      is_md6_256: true                # example: "4a56c5d61a2bf080e4bb945b0b6cd8a98e8812749dbc104881e35c35e29202d1"
      is_md6_512: true                # example: "4054d49a4fefce5a1958242fee07a2a25e831347a351aef7e28d1e31922e9fc1f1634523bfcfb35db78292e3b20a3b8f300c6e63c143d88462d4733b520333cc"
      is_ripemd_128: true             # example: "781f357c35df1fef3138f6d29670365a"
      is_ripemd_160: true             # example: "e3431a8e0adbf96fd140103dc6f63a3f8fa343ab"
      is_ripemd_256: true             # example: "8536753ad7bface2dba89fb318c95b1b42890016057d4c3a2f351cec3acbb28b"
      is_ripemd_320: true             # example: "bfa11b73ad4e6421a8ba5a1223d9c9f58a5ad456be98bee5bfcd19a3ecdc6140ce4c700be860fda9"
      is_sha_224: true                # example: "78d8045d684abd2eece923758f3cd781489df3a48e1278982466017f"
      is_sha_256: true                # example: "a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3"
      is_sha_384: true                # example: "9a0a82f0c0cf31470d7affede3406cc9aa8410671520b727044eda15b4c25532a9b5cd8aaf9cec4919d76255b6bfb00f"
      is_sha_512: true                # example: "3c9909afec25354d551dae21590bb26e38d53f2173b8d3dc3eee4c047e7ab1c1eb8b85103e3be7ba613b31bb5c9c36214dc9f14a42fd7a2fdb84856bca5c44c2"
      is_crc16: true                  # example: "ba04"
      is_hmac: true
      is_hmac_md5: true
      is_hmac_sha1: true
      is_hmac_sha256: true
      is_hmac_sha512: true

      # Web
      ip: 220.78.168.0/21             # https://github.com/Respect/Validation/blob/main/docs/rules/Ip.md
      is_ip6: true                    # Check if the value is a valid IPv6 address. Example: 2001:0db8:85a3:0000:0000:8a2e:0370:7334
      ip4_subnets: [ 192.168.1.2/24 ] # If not set, then no subnet check
      is_mac_address: true
      is_public_domain_suffix: true
      # is_email: true                # improve
      is_tid: true
      # is_domain: true               # improve
      is_video_url: true
      is_null: true                   # see empty_values

      # URL
      url_scheme: https               # Can be set of schemes [http, https, ftp]
      url_host: example.com           # Can be regex
      url_path: /some/path            # Can be regex
      url_query: p1=val1&p2=val2      # Can be regex
      url_fragment: some-fragment     # Can be regex
      url_port: 443                   # Can be set of ports [80, 443, 8080]
      url_username: user              # Can be regex
      url_password: password          # Can be regex

      # Email
      email_domain: example.com       # Can be regex
      email_user: user                # Can be regex

      # Math
      is_fibonacci: true
      is_prime_number: true
      is_positive: true
      is_negative: true
      is_zero: true
      is_digit: true
      is_digits: true
      is_even: true
      is_odd: true
      is_roman: true
      is_perfect_square: true
      is_alnum: true
      is_alpha: true
      is_charset: true
      is_hex_rgb_color: true
      no_whitespace: true
      is_phone: true
      is_punct: true
      is_slug: true
      is_space(s): true
      is_regex: true
      is_version: true
      is_vowel: true
      is_consonant: true
      is_xdigit: true
      is_angle:                       # 0.0-360.0

      custom_func: callbak function


    aggregate_rules:
      count_true: 1
      count_false: 1

      # https://github.com/markrogoyski/math-php#statistics---averages
      truncated_mean: [ 1, 25 ]      # 25 percent of observations trimmed from each end of distribution
      generalized_mean: [ 1, 2 ]     # p-power mean
      power_mean: [ 1, 2 ]           # p-power mean
      lehmer_mean: [ 1, 3 ]          # p-power mean
      simple_moving_average: [ 1, n ]  # SMA
      cumulative_moving_average: 1   # CMA
      weighted_moving_average: [ 1, n, "weights[]" ]     # WMA
      exponential_moving_average: 1  # EPA

      custom_func: callbak function

  - inherit: alias_1\Column Name      # Inherited from another schema
    rules: # Overwrite rules from another schema
      true_values: [ true, 1, yes ]


complex_rules:
  - sum_by_group:
      group_column: 0
      sum_column: 1
  - handler: My\Complex\Rule          # Full name of PHP Class (with namespace)
    handler_args:
      - column:0
      - column:1
